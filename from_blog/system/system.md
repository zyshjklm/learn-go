## system info for goroutine

[refer from](http://blog.jobbole.com/35304/)

### 1 OS and running library

示意图：

###### ![vdso](vdso.png)



VDSO virtual dynamic shared object.随内核发行但不在内核态
简单调用直接由glibc提供，其它由VDSO提供接口并决定后继调用接口
对VDSO，fork走INT80，getuid走syscall.

linux: http://syscalls.kernelgrok.com/
win: http://j00ru.vexillium.org/ntapi/
VDSO: http://lwn.net/Articles/446528/



### 2 并发与并行

并发：concurrency

并行：parallelism

**并发**：是指程序表态的**时序可重叠的逻辑结构**。对应的是**顺序的(Sequential)结构**。顺序的结构表达只有一个逻辑控制流，只能从前到后的顺序执行。而并发表示的时序流程图可以有多个独立的逻辑分支。这些独立的分支中可以同时处理（deal）多件的。

比如说安排一个人做一顿饭，计划中就包括：买菜，用电饭煲煮饭，准备菜碗，择菜，洗菜，切菜，炒菜，等等过程。洗菜切菜是需要顺序执行的，但煮饭和洗菜是可以同时处理的，即在时间线上是可能重叠的，这个就是并发。

**并行**：并行是指程序的运行状态，即程序在一个时刻被多个CPU流水线**同时进行**处理。这种运行状态称为程序是并行的。并行是需要硬件(CPU)级别的支持才行。对就的是**顺序执行**。

**两者的关系**：

* 并发是并行的必要条件。在逻辑上不能拆分成并发的时序流程，则只能串行执行，不能并行。
* 并发并不是并行的充分条件。一个写成并发的程序，只在一个CPU流水线上执行时，也不是并行的，即前面说的，需要硬件的支持。
* 并发只是一种描述问题的表达方式，主要是为了简化代码逻辑，而不是提高运行速度。

**如何并发**：

* 显示定义并触发多个代码片段（逻辑控制流），然后由应用程序或者OS进行调度。
* 隐示定义放置多个代码片段，在系统事件发生时触发执行相应片段。即由事件驱动。

**如何并行**：

* 多CPU。最常用的方式。包括多核或者超线程。

* 多机如map reduce，或者编译器级别的指令级并行，单指令多数据。

  ​



