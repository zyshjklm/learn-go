2017.0902

### web server

* apache时代。
  * 多进程模式。类似于银行增加柜台。
  * tomcat也是如此。
  * 优点是安全。各个进程不干扰。
  * 问题每个进程都是阻塞的，而且有网络等待。
    * 就像在餐厅点菜，会消耗服务员大量时间。
  * 处理流程是：
    * 监控
    * 得到新连接，处理请求



**非阻塞编程：**

* 监听端口。即服务员上岗开始服务。
* 得到新连接。有新客人到来。
* 注册到监听器。相当于安排客人入座，然后就先不管了
* 等待任意连接有数据，相当于客人确认要开始点餐了。
  * 服务员即响应新客人入店，也响应点菜。
* 返回处理结果，并等待新数据。



常用非阻塞库：

* libev
* libevent



**redis：**

* 单线程模式。使用非阻塞IO模型。
* 数据都在内存，没有复杂的计算，也没有磁盘IO，已经够用。
* 不需要处理多线程的锁。



**nginx**

* 多进程与多线程。相当于多个服务员。
  * 每个服务员工作在非阻塞模式。
* 多个请求之间是没有关系的，没有交集。
* 作用：
  * 静态网页，内存缓存。
  * WEB服务，将处理逻辑转给Lua或者php。
  * 负载均衡，反向代理。
* 扩展：
  * tengine
  * openresty



**协程**

* golang使用协程。每个顾客一个服务员——至上服务。
  * 从进店、点菜、吃饭到吃完，一直站在旁边服务。
* 将很重量经的进程变得轻量。
* 协程间并发。
* 多个CPU核之间可以并行。充分利用CPU资源。
* 协程由runtime调度。



**net/http库**

一个http请求，启动一个协程进行处理。

具体实现参考：../web/



### 15 DB工具

- navicat for mysql
  - [refer](https://blog.csdn.net/kuangdacaikuang/article/details/76515985)
- sequel pro

